{% extends 'teamLeadHome.html' %}
{% block content %}

<section id="hero" class="hero section dark-background contact">
  <img src="../static/assets/img/hero-bg-user.jpg" alt="" data-aos="fade-in">

  <div class="container">
    <div class="col-lg-12">

      <!-- Title -->
      <div class="row gy-4 mt-5 justify-content-center" data-aos="fade-up">
        <div class="col-xl-3 col-md-4">
          <div class="icon-box">
            <i class="bi bi-card-list"></i>
            <h3><a href="">Assign Projects</a></h3>
          </div>
        </div>
      </div>
      <br>

      <!-- Messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
      {% endif %}

      <!-- ✅ Project Form -->
      <form method="post" class="php-email-form" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row gy-4">

          <div class="col-md-6">
            <label for="lead">Select Project</label>
            <select name="project" id="lead" class="form-control" required>
              <option value="" disabled selected>Select Project</option>
              {% for i in data %}
                <option value="{{ i.project.id }}">{{ i.project.title }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-6">
            <label for="lead">Assign Developer</label>
            <select name="developer" id="lead" class="form-control" required>
              <option value="" disabled selected>Select Developer</option>
              {% for i in dev %}
                <option value="{{ i.id }}">{{ i.name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-6">
            <label for="client">Project Module</label>
            <input type="text" id="client" name="module" class="form-control" required>
          </div>

          <div class="col-md-6">
            <label for="client">Attach File</label>
            <input type="file" id="client" name="attachment" class="form-control" required>
          </div>

          <div class="col-md-12">
            <label for="description">Description</label>
            <textarea id="description" name="description" class="form-control" required></textarea>
          </div>

          <div class="col-md-6">
            <label for="start_date">Start Date</label>
            <input type="date" id="start_date" name="start_date" class="form-control" required>
          </div>

          <div class="col-md-6">
            <label for="end_date">End Date</label>
            <input type="date" id="end_date" name="end_date" class="form-control">
          </div>


          <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>

        </div>
      </form>

      <br><br>

      <!-- ✅ Display All Assignments -->
      <!-- <h3 class="text-center">Assignments</h3>
      <table class="table table-bordered table-striped mt-3">
        <thead>
          <tr>
            <th>#</th>
            <th>Project</th>
            <th>Module</th>
            <th>Assigned To</th>
            <th>Status</th>
            <th>Attachment</th>
            <th>Assigned at</th>
            <th>Progress</th>
          </tr>
        </thead>
        <tbody>
          {% for i in assignments %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ i.project.title }}</td>
            <td>{{ i.module }}</td>
            <td>{{ i.developer.name }}</td>
            <td>{{ i.status }}</td>
            <td>
              {% if i.attachment %}
                <a href="/static/media/{{ i.attachment }}" target="_blank">View</a>
              {% else %}
                No File
              {% endif %}
            </td>
            <td>{{ i.assigned_date }}</td>
            <td><a href="teamViewProgress?id={{ i.id }}" class="btn btn-success">View Progress</a></td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8" class="text-center text-muted">No projects available.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table> -->

    </div>
  </div>
</section>

{% endblock %}
