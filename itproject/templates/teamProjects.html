{% extends 'teamLeadHome.html' %}
{% block content %}

<head>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<section id="hero" class="hero section dark-background contact">
  <img src="../static/assets/img/hero-bg-user.jpg" alt="" data-aos="fade-in">

  <div class="container">
    <div class="col-lg-12">
      <div class="row gy-4 mt-5 justify-content-center" data-aos="fade-up">
        <div class="col-xl-4 col-md-6 text-center">
          <div class="icon-box">
            <i class="bi bi-folder-plus"></i>
            <h3>My Projects</h3>
            <p>Projects assigned to you</p>
          </div>
        </div>
      </div>
      <br>
      
      <!-- Messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-primary">{{ message }}</div>
        {% endfor %}
      {% endif %}
      
      <!-- Notification Table -->
      <div class="table-responsive">
      <table class="table table-bordered table-striped mt-3">
        <thead>
          <tr>
            <th>#</th>
            <th>Project Title</th>
            <th>Client</th>
            <th>Requirements</th>
            <th>Assigned On</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Attachment</th>
            <th>Action</th>
          </tr>
        </thead>
        {% if data %}
        <tbody>
          {% for project in data %}
          <tr {% if not project.seen %}style="background-color: #fff6e6;"{% endif %}>
            <td>{{ forloop.counter }}</td>
            <td>{{ project.project.title }}</td>
            <td>{{ project.project.client_name }}</td>
            <td>{{ project.requirements }}</td>
            <td>{{ project.assigned_date|default:project.start_date }}</td>
            <td>{{ project.start_date }}</td>
            <td>{{ project.end_date }}</td>
            <td>
              {% if project.project.status == 'Ongoing' %}
                <span class="badge bg-warning text-dark">{{ project.project.status }}</span>
              {% else %}
                <span class="badge bg-success">{{ project.project.status }}</span>
              {% endif %}
            </td>
            <td>
              {% if project.attachment %}
                <a href="/static/media/{{ project.attachment }}" target="_blank">View</a>
              {% else %}
                No File
              {% endif %}
            </td>
            <td><a href="tlUpdate?id={{ project.id }}" class="btn btn-success">Update <br> Work Progress</a></td>
          </tr>
          {% endfor %}
        </tbody>
        {% endif %}
      </table>
      </div>

    </div>
  </div>
</section>

<!-- {% if unseen %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    Swal.fire({
      title: 'ðŸ”” New Project Assigned!',
      text: 'You have {{ unseen|length }} new project{{ unseen|length|pluralize }}.',
      icon: 'info',
      showCancelButton: true,
      confirmButtonText: 'View Now',
      cancelButtonText: 'Mark as Seen',
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
    }).then((result) => {
      // Mark as seen when user clicks either button
      fetch('/clear-notifications/', {
        method: 'POST',
        headers: {
          'X-CSRFToken': '{{ csrf_token }}',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ clear: true })
      });
    });
  });
</script>
{% endif %} -->

{% endblock %}



change the table to a notifaction message
like we see on mobile phone
